# LLM統合レビュー

## 対象の判定基準

`engine/` 配下の LLM 関連ファイルに変更がある場合。具体的には以下のいずれか:

- `llm_config.py`
- `response_parser.py`
- `*provider*.py`（`random_provider.py` を除く）
- `*prompt*`

## チェック観点

LLM 統合の品質と堅牢性をレビューする。

### プロンプト設計
- 明確で曖昧さのない指示になっているか
- 出力形式（名前のみ、JSON 等）が明示されているか
- コンテキスト量が適切か（過剰な情報を含めていないか）

### レスポンスパース
- パース処理の堅牢性（想定外の応答フォーマットへの対応）
- フォールバック戦略の適切さ（ランダム選択、デフォルト値等）
- エッジケースの考慮（空文字列、複数候補、部分一致等）

### API 利用
- API キー・シークレットがハードコードされていないか（環境変数経由か）
- LangChain の利用パターン（適切な Chain/Model 選択、非推奨 API の回避）
- トークン効率（不要なコンテキスト、過剰なシステムプロンプトの回避）

### エラーハンドリング
- API タイムアウトへの対応
- レート制限への対応
- 無効なレスポンスへの対応（リトライ、フォールバック）
